<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Projeto CalendÃ¡rio</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="page">

    <header class="header">
        <h1>ðŸ“… Projeto CalendÃ¡rio</h1>
        <p>GestÃ£o de eventos Martim Vasco</p>
    </header>

    <section class="card">
        <h2>Eventos</h2>

        {% if eventos %}
            {% for e in eventos %}
                <div class="event">
                    <div class="event-info">
                        <h3>{{ e.titulo }}</h3>
                        <p class="date">{{ e.data_inicio }} â†’ {{ e.data_fim }}</p>
                        <span class="badge">{{ e.prioridade }}</span>
                    </div>

                    <div class="event-actions">
                        <a href="{{ url_for('editar', evento_id=e.id) }}" class="btn small">Editar</a>

                        <form action="{{ url_for('remover', evento_id=e.id) }}" method="POST">
                            <button type="submit" class="btn small danger">Remover</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="empty">NÃ£o existem eventos.</p>
        {% endif %}
    </section>

    <section class="card">
        <h2>
            {% if evento_editar %}
                Editar evento
            {% else %}
                Adicionar evento
            {% endif %}
        </h2>

        <form method="POST"
              action="{% if evento_editar %}{{ url_for('editar', evento_id=evento_editar.id) }}{% else %}/{% endif %}">

            <input type="text" name="titulo" placeholder="TÃ­tulo"
                   value="{{ evento_editar.titulo if evento_editar }}" required>

            <input type="text" name="descricao" placeholder="DescriÃ§Ã£o"
                   value="{{ evento_editar.descricao if evento_editar }}">

            <div class="grid">
                <input type="datetime-local" name="data_inicio"
                       value="{{ evento_editar.data_inicio if evento_editar }}" required>

                <input type="datetime-local" name="data_fim"
                       value="{{ evento_editar.data_fim if evento_editar }}" required>
            </div>

            <select name="prioridade">
                {% for p in ["Baixa", "MÃ©dia", "Alta"] %}
                    <option value="{{ p }}"
                        {% if evento_editar and evento_editar.prioridade == p %}selected{% endif %}>
                        {{ p }}
                    </option>
                {% endfor %}
            </select>

            <button type="submit">
                {% if evento_editar %}
                    Guardar alteraÃ§Ãµes
                {% else %}
                    Adicionar evento
                {% endif %}
            </button>
        </form>
    </section>

</div>

</body>
</html>
